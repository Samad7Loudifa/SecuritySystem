<app-navbar></app-navbar>
<div class="container glassy d-flex flex-column justify-content-center mt-3 vh-200">
  <h2 class="mt-3 text-dark header">Add New Guest</h2>
  <form class="needs-validation mb-3" (ngSubmit)="onsubmit(guestform)" #guestform="ngForm">
    <div class="mb-3">
      <label for="guestName" class="form-label text-dark">Guest's Name</label>
      <input [(ngModel)]="guest.name" name="guestName" ngModel type="text" class="form-control" id="guestName" placeholder="Enter guest's name" required #name="ngModel">
      <div>
        <small *ngIf="name.invalid && name.touched">Guest name is a required field</small>
      </div>
    </div>
    <div class="mb-3">
      <label for="ID" class="form-label text-dark">ID</label>
      <input [(ngModel)]="guest.ID" aria-required="true" name="ID" ngModel type="text" class="form-control" id="ID" placeholder="Enter ID number" required #ID="ngModel" (input)="bannedornah()">
      <div>
        <small *ngIf="ID.invalid && ID.touched">ID is a required field</small>
      </div>
    </div>
    <div class="mb-3">
      <label for="Image" class="form-label text-dark">Image</label>
      <input (change)="takeimg($event)" name="Image" ngModel type="file" class="form-control" id="Image" placeholder="Select image" required #IMAGE="ngModel">
      <div>
        <small *ngIf="IMAGE.invalid && IMAGE.touched">Image is a required field</small>
      </div>
    </div>
    <div class="mb-3">
      <label for="residentSelect" class="form-label text-dark">Select Resident</label>
      <select [(ngModel)]="guest.resident" name="Selectedresident" ngModel class="form-select" id="residentSelect" required #resident="ngModel">
        <option value="">Select a resident</option>
        <option *ngFor="let resident of residents" [value]="resident._id"> name: {{ resident.name }} flat: {{resident.flat}}</option>
      </select>
      <div>
        <small *ngIf="resident.invalid && resident.touched">Please select a resident</small>
      </div>
      <div *ngIf="isBanned" class="alert alert-danger mt-2 " role="alert">
        HAD WELD L9AHBA RA MBANI !!!!!!
      </div>
      <div *ngIf="success" class="alert alert-success mt-2" role="alert">
        Visit was successful logged! you will be redirected back to visit history!
      </div>
    </div>
    <div class="text-center mb-2">
      <button (click)="add()" type="submit" class="mx-2 btn btn-success" [disabled]="!guestform.valid || isBanned || success ">Submit</button>
      <a routerLink="/guests" class="mx-2 btn btn-secondary">Back</a>
    </div>
  </form>
</div>
